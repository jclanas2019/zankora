# ==========================================
# Agent Gateway Configuration
# ==========================================

# Server Configuration
# --------------------
AGW_HOST=127.0.0.1
AGW_PORT=8787
AGW_INSTANCE_ID=gateway-01

# Security Configuration
# ----------------------
# Enable/disable client authentication (set to false for local dev only)
AGW_REQUIRE_CLIENT_AUTH=false

# Client API keys (JSON array format)
# Generate strong keys with: python -c "import secrets; print(secrets.token_urlsafe(32))"
AGW_CLIENT_API_KEYS=["devkey"]

# Require human approval for write tools (recommended: true in production)
AGW_REQUIRE_APPROVALS_FOR_WRITE_TOOLS=true

# Approval timeout in seconds (default: 300 = 5 minutes)
AGW_APPROVAL_TIMEOUT_S=300

# Rate Limiting
# -------------
# Requests per second per principal
AGW_RATE_LIMIT_RPS=10

# Burst capacity (max tokens in bucket)
AGW_RATE_LIMIT_BURST=20

# Paths Configuration
# -------------------
# Directory for persistent data (SQLite DB, logs, etc.)
AGW_DATA_DIR=./data

# Directory for plugins
AGW_PLUGIN_DIR=./plugins

# Agent Run Configuration
# -----------------------
# Agent engine: simple (default, no extra deps) or langgraph (requires: pip install -e .[agentic])
AGW_AGENT_ENGINE=simple

# Maximum steps per agent run (prevents infinite loops)
AGW_RUN_MAX_STEPS=20

# Timeout for entire run in seconds
AGW_RUN_TIMEOUT_S=300

# Enable automatic retry on transient failures
AGW_RUN_RETRY=1

# Maximum number of retries for failed tool calls
AGW_RUN_MAX_RETRIES=3

# Maximum messages to include in agent context
AGW_MAX_CONTEXT_MESSAGES=50

# LLM Provider Configuration
# ---------------------------
# Provider: anthropic, openai, or mock
AGW_LLM_PROVIDER=mock

# Anthropic API Configuration
# AGW_ANTHROPIC_API_KEY=sk-ant-...
# AGW_ANTHROPIC_MODEL=claude-sonnet-4-20250514

# OpenAI API Configuration
AGW_OPENAI_API_KEY=sk-p
AGW_OPENAI_MODEL=gpt-4.1-mini

# Mock LLM Configuration (for testing)
AGW_MOCK_LLM_DELAY=0.5

# Channel Configuration
# ---------------------

# Telegram Bot
AGW_TELEGRAM_BOT_TOKEN=<your-telegram-bot-token>
AGW_TELEGRAM_WEBHOOK_URL=https://your-domain.com/webhooks/telegram

# WhatsApp Business (via Twilio)
AGW_WHATSAPP_ACCOUNT_SID=<your-twilio-account-sid>
AGW_WHATSAPP_AUTH_TOKEN=<your-twilio-auth-token>
AGW_WHATSAPP_FROM_NUMBER=+14155238886

# WebChat Configuration
AGW_WEBCHAT_ENABLED=true
AGW_WEBCHAT_CORS_ORIGINS=["http://localhost:3000","https://your-app.com"]

# Logging Configuration
# ---------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
AGW_LOG_LEVEL=DEBUG

# Log format: json or console
AGW_LOG_FORMAT=json

# Enable log file output
AGW_LOG_FILE_ENABLED=true
AGW_LOG_FILE_PATH=./data/logs/gateway.log

# Log rotation
AGW_LOG_FILE_MAX_BYTES=10485760  # 10MB
AGW_LOG_FILE_BACKUP_COUNT=5

# Observability Configuration
# ---------------------------
# Enable Prometheus metrics endpoint
AGW_METRICS_ENABLED=true

# Enable health check endpoint
AGW_HEALTHCHECK_ENABLED=true

# Circuit Breaker Configuration
# -----------------------------
# Enable circuit breaker for external services
AGW_CIRCUIT_BREAKER_ENABLED=true

# Failure threshold before opening circuit
AGW_CIRCUIT_BREAKER_THRESHOLD=5

# Time window for failure counting (seconds)
AGW_CIRCUIT_BREAKER_TIMEOUT=60

# Half-open state timeout (seconds)
AGW_CIRCUIT_BREAKER_HALF_OPEN_TIMEOUT=30

# Database Configuration
# ----------------------
# Database URL (SQLite for dev, PostgreSQL for production)
AGW_DATABASE_URL=sqlite+aiosqlite:///./data/gateway.db
# AGW_DATABASE_URL=postgresql+asyncpg://user:pass@localhost/gateway_db

# Database pool size
AGW_DB_POOL_SIZE=5
AGW_DB_MAX_OVERFLOW=10

# Enable database query logging (dev only)
AGW_DB_ECHO=false

# Advanced Configuration
# ----------------------
# Enable hot-reload of plugins (dev only)
AGW_PLUGIN_HOT_RELOAD=false

# WebSocket ping interval (seconds)
AGW_WS_PING_INTERVAL=30

# WebSocket ping timeout (seconds)
AGW_WS_PING_TIMEOUT=10

# Maximum WebSocket message size (bytes)
AGW_WS_MAX_MESSAGE_SIZE=1048576  # 1MB

# Event bus queue size per subscriber
AGW_EVENT_BUS_QUEUE_SIZE=1000

# Feature Flags
# -------------
AGW_FEATURE_ANALYTICS=true
AGW_FEATURE_MULTI_TENANCY=false
AGW_FEATURE_GRAPHQL=false
